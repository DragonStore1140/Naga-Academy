<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academy Naga - Belajar TKA</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- MODAL LOGIN - WAJIB -->
    <div id="loginModal" class="modal" style="display: flex;">
        <div class="modal-content login-modal">
            <div class="login-header">
                <img src="gambar/icon.png" alt="Academy Naga" class="login-logo" onerror="this.src='https://via.placeholder.com/80x80?text=Naga'">
                <h2>Academy Naga</h2>
                <p>Masuk untuk memulai belajar</p>
            </div>
            
            <div class="login-form">
                <div class="form-group">
                    <label for="loginName">Nama Lengkap</label>
                    <input type="text" id="loginName" placeholder="Masukkan nama kamu" autocomplete="off">
                </div>
                
                <div class="form-group">
                    <label for="loginClass">Kelas</label>
                    <input type="text" id="loginClass" placeholder="Contoh: 9A 2025-2026" autocomplete="off">
                </div>
                
                <div class="form-group">
                    <label for="loginPassword">Password Tryout</label>
                    <input type="password" id="loginPassword" placeholder="Masukkan password" autocomplete="off">
                </div>
                
                <div id="loginError" class="login-error" style="display: none;"></div>
                
                <button class="login-btn" onclick="handleLogin()">MASUK</button>
            </div>
            
<div class="login-footer">
    <p><i class="fas fa-lock"></i>  Beli password Rp5.000</p>
    <p style="font-weight: bold; color: #25D366;"> WA: 6289675797762</p>
</div>
        </div>
    </div>

    <header id="mainHeader" style="display: none;">
        <!-- Settings kiri -->
        <button class="settings-btn" onclick="openSettings()"><i class="fas fa-cog"></i></button>
        
        <!-- Profile TENGAH -->
        <div class="header-left">
            <img src="gambar/profile.png" alt="Profile" class="profile-icon" id="headerProfileImg" onerror="this.src='https://via.placeholder.com/45x45?text=User'">
            <div class="user-info">
                <span class="user-name" id="headerName">-</span>
                <span class="user-class" id="headerClass">-</span>
            </div>
        </div>
        
        <!-- Spacer invisible -->
        <div class="header-spacer"></div>
        
        <!-- Icon kanan -->
        <div class="header-right">
            <img src="gambar/icon.png" alt="Academy Naga" class="academy-icon" onerror="this.src='https://via.placeholder.com/45x45?text=Naga'">
        </div>
    </header>

    <main id="mainContent" style="display: none;">
        <div class="welcome-section">
            <h1>Selamat Datang di Naga Academy</h1>
            <p id="welcomeDate">Untuk Tingkat SMP Dan Sederajat</p>
        </div>

        <!-- SESI SELECTOR - TAMBAHAN -->
        <div class="sesi-selector">
            <label for="sesiSelect"><i class="fas fa-layer-group"></i> Pilih Sesi:</label>
            <select id="sesiSelect" onchange="ubahSesi()">
                <option value="1">Sesi 1 (Soal 1-25)</option>
                <option value="2" disabled>Sesi 2 (Soal 26-50) - Coming Soon</option>
                <option value="3" disabled>Sesi 3 (Soal 51-75) - Coming Soon</option>
                <option value="4" disabled>Sesi 4 (Soal 76-100) - Coming Soon</option>
            </select>
        </div>

        <div class="quick-access">
            <h2>Latih Otakmu<i class="fas fa-crown" style="color: gold;"></i></h2>
            <div class="button-grid">
                <!-- RANGKUMAN (TETAP PAKAI CHECK ACCESS) -->
                <button class="academy-btn" onclick="checkAccess('rangkuman-bindo.html')">
                    <span class="btn-icon"><i class="fas fa-book-open"></i></span>
                    Rangkuman Bahasa Indonesia
                </button>
                <button class="academy-btn" onclick="checkAccess('rangkuman-mtk.html')">
                    <span class="btn-icon"><i class="fas fa-ruler"></i></span>
                    Rangkuman Matematika
                </button>
                
                <!-- SOAL (PAKAI BUKA SOAL DENGAN SESI) -->
                <button class="academy-btn" onclick="bukaSoal('soal-bindo.html')">
                    <span class="btn-icon"><i class="fas fa-pencil-alt"></i></span>
                    Latihan Soal Bahasa Indonesia
                </button>
                <button class="academy-btn" onclick="bukaSoal('soal-mtk.html')">
                    <span class="btn-icon"><i class="fas fa-calculator"></i></span>
                    Latihan Soal Matematika
                </button>
            </div>
        </div>
    </main>

    <!-- Modal Settings (BISA EDIT PROFILE, UPLOAD GAMBAR, & PASSWORD RAHASIA) -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSettings()">&times;</span>
            <h2>Pengaturan</h2>
            
            <!-- EDIT DATA DIRI -->
            <div class="settings-section">
                <h3><i class="fas fa-user-edit"></i> Edit Data Diri</h3>
                <div class="settings-option">
                    <label for="editName">Nama:</label>
                    <input type="text" id="editName" class="settings-input" value="">
                </div>
                <div class="settings-option">
                    <label for="editClass">Kelas:</label>
                    <input type="text" id="editClass" class="settings-input" value="">
                </div>
                <div class="settings-option">
                    <label>Password:</label>
                    <span class="data-display">••••••• (rahasia)</span>
                </div>
            </div>

            <!-- UPLOAD FOTO PROFIL SENDIRI -->
            <div class="settings-section">
                <h3><i class="fas fa-camera"></i> Foto Profil</h3>
                <div class="upload-container">
                    <div class="current-avatar">
                        <img src="gambar/profile.png" alt="Preview" id="profilePreview" class="profile-preview">
                    </div>
                    <div class="upload-controls">
                        <label for="profileUpload" class="upload-btn"><i class="fas fa-image"></i> Pilih Gambar</label>
                        <input type="file" id="profileUpload" accept="image/*" style="display: none;" onchange="previewProfileImage(this)">
                        <button class="save-avatar-btn" onclick="saveProfilePicture()"><i class="fas fa-save"></i> Simpan Foto</button>
                        <button class="reset-avatar-btn" onclick="resetProfilePicture()"><i class="fas fa-undo"></i> Reset</button>
                    </div>
                    <p class="upload-hint">Klik "Pilih Gambar" ambil foto dari HP/kamera</p>
                </div>
            </div>

            <!-- TOMBOL SIMPAN DATA DIRI -->
            <button class="save-profile-btn" onclick="saveProfileChanges()"><i class="fas fa-check"></i> Simpan Data Diri</button>

            <div class="settings-divider"></div>

            <!-- TAMPILAN -->
            <div class="settings-section">
                <h3><i class="fas fa-palette"></i> Tampilan</h3>
                <div class="settings-option">
                    <label for="theme">Tema:</label>
                    <select id="theme" onchange="changeTheme(this.value)">
                        <option value="light">Terang</option>
                        <option value="dark">Gelap</option>
                    </select>
                </div>
                <div class="settings-option">
                    <label for="fontSize">Ukuran Font:</label>
                    <select id="fontSize" onchange="changeFontSize(this.value)">
                        <option value="normal">Normal</option>
                        <option value="large">Besar</option>
                        <option value="larger">Lebih Besar</option>
                    </select>
                </div>
            </div>

            <!-- TAMBAHKAN INI: TOMBOL LOGOUT -->
            <div class="settings-divider"></div>

            <div class="settings-section">
                <button class="logout-btn" onclick="handleLogout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </div>
</div>

    <!-- Modal Hasil Ujian -->
    <div id="resultModal" class="modal">
        <div class="modal-content result-modal">
            <span class="close" onclick="closeResultModal()">&times;</span>
            <h2>Hasil Ujian</h2>
            <div id="resultContent" class="result-content"></div>
            
            <!-- BUTTON KEMBALI KE LOBBY PREMIUM -->
            <div class="result-actions">
                <button class="lobby-btn" onclick="backToLobby()">
                    <span class="lobby-icon"><i class="fas fa-home"></i></span>
                    <span class="lobby-text">Kembali ke Lobby</span>
                    <span class="lobby-icon"><i class="fas fa-arrow-right"></i></span>
                </button>
            </div>
        </div>
    </div>

    <script src="database/rangkuman.js"></script>
    <script src="database/soal-bindo.js"></script>
    <script src="database/soal-mtk.js"></script>
    <script src="script.js"></script>
    <script>
    // Load profile picture setiap halaman dibuka
    document.addEventListener('DOMContentLoaded', function() {
        const savedImage = localStorage.getItem('userProfileImage');
        const headerImg = document.getElementById('headerProfileImg');
        
        if (savedImage && headerImg) {
            headerImg.src = savedImage;
        }
    });

    // Fungsi untuk menyimpan pilihan sesi
    function ubahSesi() {
        const sesi = document.getElementById('sesiSelect').value;
        localStorage.setItem('sesiTryout', sesi);
    }

    // Fungsi untuk membuka soal dengan sesi terpilih
    function bukaSoal(halaman) {
        const sesi = localStorage.getItem('sesiTryout') || 1;
        window.location.href = `${halaman}?sesi=${sesi}`;
    }
    </script>
</body>
</html>